"use strict";const cardList=document.querySelector(".js-cardList"),favCardList=document.querySelector(".js-favList"),searchInput=document.querySelector(".js-input"),searchBtn=document.querySelector(".js-button");let characters=[],favCharacters=[];fetch("./assets/data/characters.json",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{characters=e,renderAllCards(characters)});const savedFavorites=JSON.parse(localStorage.getItem("favorites"));function renderOneCard(e,t){let a="";a=-1===favCharacters.findIndex(t=>t.char_id===e.char_id)?"":"selected";const r=document.createElement("li");r.setAttribute("class","listElement");const s=document.createElement("article");s.setAttribute("class","js-articleElement listElement__article "+a),s.setAttribute("id",""+e.char_id);const c=document.createElement("img");c.setAttribute("src",""+e.img),c.setAttribute("alt",""+e.name),c.setAttribute("class","listElement__article--img");const n=document.createElement("h3"),d=document.createTextNode(""+e.name);n.setAttribute("class","listElement__article--name");const i=document.createElement("p"),l=document.createTextNode(""+e.status);i.setAttribute("class","listElement__article--status"),n.appendChild(d),i.appendChild(l),s.appendChild(c),s.appendChild(n),s.appendChild(i),r.appendChild(s),t.appendChild(r)}function renderAllCards(e){cardList.innerHTML="";for(const t of e)renderOneCard(t,cardList);addListListeners()}function renderFavCharacters(e){favCardList.innerHTML="";for(const t of e)renderOneCard(t,favCardList)}function addListListeners(){const e=document.querySelectorAll(".js-articleElement");for(const t of e)t.addEventListener("click",handleClickFavCard)}function handleClickFavCard(e){const t=characters.find(t=>t.char_id===parseInt(e.currentTarget.id)),a=favCharacters.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===a?(console.log(favCharacters),favCharacters.push(t),localStorage.setItem("favorites",JSON.stringify(favCharacters))):(favCharacters.splice(a,1),localStorage.setItem("favorites",JSON.stringify(favCharacters))),renderFavCharacters(favCharacters),renderAllCards(characters)}function handleClickSearchCard(e){e.preventDefault();const t=searchInput.value;renderAllCards(characters.filter(e=>e.name.toLowerCase().includes(t)))}null!==savedFavorites&&(favCharacters=savedFavorites,renderFavCharacters(savedFavorites)),searchBtn.addEventListener("click",handleClickSearchCard);